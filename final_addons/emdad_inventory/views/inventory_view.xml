<?xml version="1.0" encoding="utf-8"?>
<emdad>
<!-- FORMS -->
    <record id="view_emdad_warehouse_form" model="ir.ui.view">
        <field name="name">emdad.warehouse.view.form</field>
        <field name="model">emdad.warehouse</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <div class="oe_title">
                    <h1>
                        <field name="name"/>
                        </h1>
                    </div>
                    <group string="Warehouse Information">
                    <field name="short_name"/>
                    <field name="total_qty"/>
                    </group>
                    <notebook>
                    <page string="Locations">
                        <field name="locations" widget="one2many_list">
                             <kanban>
                              <t t-name="kanban-box">
                               <div t-attf-class="oe_kanban_global_click">
                                <t t-name="kanban-box">
                                <div t-attf-class="oe_kanban_global_click">
                                    <div class="o_kanban_image">
                                       <img src="https://cdn.iconscout.com/icon/free/png-512/free-boxes-3705907-3086161.png"/>
                                    </div>
                                    <div class="oe_kanban_details">
                                        <strong class="o_kanban_record_title">
                                        <field name="name"/>
                                        <br></br>
                                        </strong>
                                    <div>
                                    <i class="fa fa-eercast" aria-hidden="true"></i>
                                     Type: <field name="location_type"/>
                                     <br></br>
                                     <i class="fa fa-th-large" aria-hidden="true"></i>
                                      Quantity: <field name="quantity"/>                                     
                                    </div>
                                    <field name="used_delivery" invisible="1"/>
                                    <field name="used_reciepts" invisible="1"/>
                                    <div invisible="used_delivery != True">
                                    <i class="fa fa-truck" aria-hidden="true"></i> Used for delivery
                                    </div>
                                    <div invisible="used_reciepts != True">
                                    <i class="fa fa-truck" aria-hidden="true"></i> Used for reciepts
                                    </div>
                                   
                                    </div>
                                </div>
              </t>
                                </div>
                                </t>
                            </kanban>
                            </field>
                        </page>
                        <page string="Configuration">
                            <group>
                                <group string="Address">
                                    <field name="address"/>
                                    <field name="city"/>
                                    <field name="country"/>
                                    <field name="full_address"/>
                                </group>
                                <group string="Management">
                                <field name="warehouse_manager"/>
                                <field name="warehouse_relation"/>
                                </group>
                            </group>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>
    <record id="view_emdad_locations_form" model="ir.ui.view">
        <field name="name">emdad.locations.view.form</field>
        <field name="model">emdad.warehouse.location</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                <div class="oe_title">
                <h1>
                        <field name="name"/>
                        </h1>
                </div>
                <div class="container">
                    <div class="row">
                        <div class="col">
                        <center>
                            <strong>Current Quantity</strong>
                            <h2><field name="quantity"/></h2>
                        </center>
                        </div>
                        <div class="col">
                            <center>
                            <strong>Location Usage</strong>
                            <h2><field name="location_usage" readonly="1"/></h2>
                        </center>
                        </div>
                        <div class="col">
                        <center>
                            <strong>Related Warehouse</strong>
                            <h2><field name="related_warehouse" readonly="1"/></h2>
                        </center>
                        </div>
                    </div>
                </div>
                    <group string="Location Information">
                    <group>
                        <field name="related_warehouse"/>
                        <field name="location_type"/>
                        <field name="parent_location"/>
                        <field name="location_usage"/>
                                                        <field name="quantity"/>

                    </group>
                    <group>
                        <field name="used_delivery"/>
                        <field name="used_reciepts"/>
        
                    </group>
                    </group>
                    <field name="products" widget="one2many_list" readonly="1">
                        <tree group="product_id">
                            <field name="related_adjustement"/>
                            <field name="create_date"/>
                            <field name="product_id"/>
                            <field name="barcode"/>
                            <field name="expiary"/>
                            <field name="batch"/>
                            <field name="batch_status"/>
                            <field name="counted_qty"/>
                        </tree>
                    </field>

                </sheet>
            </form>
        </field>
    </record>
    <record id="view_emdad_warehouse_quants_form" model="ir.ui.view">
        <field name="name">emdad.warehouse.quants.view.form</field>
        <field name="model">emdad.warehouse.quants</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <div class="oe_title">
                    <h1>
                        <field name="name"/>
                    </h1>
                    </div>
                    <group string="Adjustement Information">
                        <field name="adjustment_date"/>
                        <field name="purpose"/>
                        <field name="location"/>
                        <field name="managed_by"/>
                    </group>
                    <div class="container">
                        <div class="row" style="padding: 10px">
                        <div class="col" style="background: #faf0e6; padding: 10px;">
                        <center>
                        <img src="https://cdn.iconscout.com/icon/free/png-512/free-barcode-2162281-1817192.png" width="80px"/>
                        <h3>Scan Product or Batch Barcode</h3>
                            <h1>
                                <field name="barcode" style="text-align: center;"/>
                            </h1>
                        </center>
                        </div>
                        </div>
                    </div>
                    <field name="quants_lines" widget="one2many_list" context="{'default_location' : location}">
                                                <tree editable="bottom">

                        <field name="product_id"/>
                        <field name="barcode"/>
                        <field name="expiary"/>
                        <field name="batch_status"/>
                        <field name="batch" context="{'default_expiary': expiary, 'default_product_id': product_id}"/>
                        <field name="location"/>
                        <field name="counted_qty"/>
                        <field name="metric"/>
                        <field name="packaging"/>
                        </tree>
                    </field>
                </sheet>
            </form>
        </field>
    </record>
    <record id="emdad_warehouse_quants_lines_view_tree" model="ir.ui.view">
        <field name="name">emdad.warehouse.quants.lines.view.tree</field>
        <field name="model">emdad.warehouse.quants.lines</field>
        <field name="arch" type="xml">
            <tree string="">
            <field name="location"/>
            <field name="product_id"/>
            <field name="barcode"/>
            <field name="batch"/>
            <field name="expiary"/>
            <field name="batch_status"/>
            <field name="counted_qty"/>
            <field name="unit_cost" sum="Total Cost"/>
            <field name="related_adjustement"/>
            </tree>
        </field>
    </record>
    <record id="emdad_warehouse_batches_view_form" model="ir.ui.view">
        <field name="name">emdad_warehouse_batches.view.form</field>
        <field name="model">emdad.warehouse.batches</field>
        <field name="arch" type="xml">
            <form string="">
                <sheet>
                <div class="oe_title">
                    <h1><field name="name"/></h1>
                </div>
                <group>
                    <group string="Batch Information">
                        <field name="gtin"/>
                        <field name="expiary"/>
                        <field name="product_id"/>
                        <field name="origin"/>
                    </group>
                    <group string="Batch Analytics">
                        <field name="status"/>
                         <field name="available"/>
                         <field name="average_cost"/>
                    </group>
                    <field name="counts"/>
                </group>

                </sheet>
            </form>
        </field>
    </record>
    <record id="emdad_warehouse_scrap_view_form" model="ir.ui.view">
        <field name="name">emdad_warehouse_scrap.view.form</field>
        <field name="model">emdad.warehouse.scrap</field>
        <field name="arch" type="xml">
            <form string="">
            <header>
                <field name="status" widget="statusbar" statusbar_visible="draft,approved,done,cancel"/>
            </header>
                <sheet>
                    <div class="oe_title">
                    <h1>
                        <field name="name"/>
                    </h1>
                    </div>
                    <group string="Scrap Action Information">
                        <group>
                            <field name="date"/>
                            <field name="reason"/>
                            <field name="explain"/>
                            <field name="location" domain="[('location_type', '=', 'scrap')]"/>
                        </group>
                        <group>
                            <field name="status"/>
                        </group>
                        
                    </group>
                    <field name="scrap" context="{'default_location': location}" widget="one2many_list">
    
                                <tree editable="bottom">
                                    <field name="barcode"/>
                                    <field name="product_id"/>
                                    <field name="location"/>
                                    <field name="batch"/>
                                    <field name="counted_qty"/>

                                    
                                </tree>
                        </field>
                </sheet>
            </form>
        </field>
    </record>
    <!-- kanban -->
<record id="emdad_warehouse_view_kanban" model="ir.ui.view">
    <field name="name">emdad_warehouse.view.kanban</field>
    <field name="model">emdad.warehouse</field>
    <field name="arch" type="xml">
        <kanban>
                <t t-name="kanban-box">
                    <div t-attf-class="oe_kanban_global_click">
                    <t t-name="kanban-box">
                        <div t-attf-class="oe_kanban_global_click">
                            <div class="o_kanban_image">
                               <img src="https://cdn.iconscout.com/icon/free/png-512/free-warehouse-1669075-1423600.png" width="150px"/>
                            </div>
                            <div class="oe_kanban_details">
                                <strong class="o_kanban_record_title">
                                <field name="name"/>
                                </strong>
                                <br></br>
                                <i class="fa fa-thumb-tack" aria-hidden="true"></i>
                                 Locations: <field name="locations_count"/>
                                 <br></br>
                                 <i class="fa fa-th-large" aria-hidden="true"></i>
                                 Available: <field name="total_qty"/>
                                 <br></br>
                                 <i class="fa fa-map-marker" aria-hidden="true"></i>
                                 Address: <field name="address"/>, <field name="city"/>, <field name="country"/>
                            </div>
                        </div>
                    </t>
                    </div>
                    </t>
            </kanban>
    </field>
</record>
<record id="emdad_warehouse_location_view_kanban" model="ir.ui.view">
    <field name="name">emdad_warehouse_location.view.kanban</field>
    <field name="model">emdad.warehouse.location</field>
    <field name="arch" type="xml">
        <kanban>
                <t t-name="kanban-box">
                               <div t-attf-class="oe_kanban_global_click">
                                <t t-name="kanban-box">
                                <div t-attf-class="oe_kanban_global_click">
                                    <div class="o_kanban_image">
                                       <img src="https://cdn.iconscout.com/icon/free/png-512/free-boxes-3705907-3086161.png"/>
                                    </div>
                                    <div class="oe_kanban_details">
                                        <strong class="o_kanban_record_title">
                                        <field name="name"/>
                                        <br></br>
                                        </strong>
                                    <div>
                                    <i class="fa fa-eercast" aria-hidden="true"></i>
                                     Type: <field name="location_type"/>
                                     <br></br>
                                     <i class="fa fa-th-large" aria-hidden="true"></i>
                                      Quantity: <field name="quantity"/>                                     
                                    </div>
                                    <field name="used_delivery" invisible="1"/>
                                    <field name="used_reciepts" invisible="1"/>
                                    <div invisible="used_delivery != True">
                                    <i class="fa fa-truck" aria-hidden="true"></i> Used for delivery
                                    </div>
                                    <div invisible="used_reciepts != True">
                                    <i class="fa fa-truck" aria-hidden="true"></i> Used for reciepts
                                    </div>
                                   
                                    </div>
                                </div>
              </t>
                                </div>
                                </t>
            </kanban>
    </field>
</record>
<record id="emdad_warehouse_batches_view_kanban" model="ir.ui.view">
    <field name="name">emdad_warehouse_batches.view.kanban</field>
    <field name="model">emdad.warehouse.batches</field>
    <field name="arch" type="xml">
         <kanban>
                <t t-name="kanban-box">
                               <div t-attf-class="oe_kanban_global_click">
                                <t t-name="kanban-box">
                                <div t-attf-class="oe_kanban_global_click">
                                    <div class="o_kanban_image">
                                    <field name="status" invisible="1"/>
                                       <img src="https://i.imgur.com/PtolqYe.png" invisible="status != 'active'"/>
                                       <img src="https://i.imgur.com/PXQzwuT.png" invisible="status != 'almost'"/>
                                       <img src="https://i.imgur.com/aCYIPAx.png" invisible="status != 'expired'"/>

                                    </div>
                                    <div class="oe_kanban_details">
                                        <strong class="o_kanban_record_title">
                                        <field name="name"/>
                                        <br></br>
                                        </strong>
                                    <div>
                                    <i class="fa fa-calendar" aria-hidden="true"></i>
                                     Expiary: <field name="expiary"/>
                                     <br></br>
                                     <i class="fa fa-th-large" aria-hidden="true"></i>
                                      Product: <field name="product_id"/>
                                      <br></br>
                                      <i class="fa fa-archive" aria-hidden="true"></i>
                                       Available Now: <field name="available"/>                                  
                                    </div>
                                   
                                    </div>
                                </div>
              </t>
                                </div>
                                </t>
            </kanban>
    </field>
</record>
<record id="emdad_warehouse_quants_view_kanban" model="ir.ui.view">
    <field name="name">emdad_warehouse_quants.view.kanban</field>
    <field name="model">emdad.warehouse.quants</field>
    <field name="arch" type="xml">
       <kanban>
                <t t-name="kanban-box">
                               <div t-attf-class="oe_kanban_global_click">
                                <t t-name="kanban-box">
                                <div t-attf-class="oe_kanban_global_click">
                                    <div class="o_kanban_image">
                                       <img src="https://cdn.iconscout.com/icon/free/png-512/free-barcode-scanner-31-1183349.png"/>
                                    </div>
                                    <div class="oe_kanban_details">
                                        <strong class="o_kanban_record_title">
                                        <field name="name"/>
                                        <br></br>
                                        </strong>
                                    <div>
                                    <i class="fa fa-calendar" aria-hidden="true"></i>
                                     Date: <field name="adjustment_date"/>
                                     <br></br>
                                     <i class="fa fa-th-large" aria-hidden="true"></i>
                                      Purpose: <field name="purpose"/>
                                      <br></br>
                                      <i class="fa fa-user" aria-hidden="true"></i>
                                       Done By: <field name="managed_by"/>                                  
                                    </div>
                                   
                                    </div>
                                </div>
              </t>
                                </div>
                                </t>
            </kanban>
    </field>
</record>


    <!-- WINDOWS -->
     <record model="ir.actions.act_window" id="warehouse_emdad_windows">
        <field name="name">Warehouses</field>
        <field name="res_model">emdad.warehouse</field>
        <field name="view_mode">kanban,form</field>
        <field name="domain">[]</field>
    </record>
     <record model="ir.actions.act_window" id="locations_emdad_windows">
        <field name="name">Locations</field>
        <field name="res_model">emdad.warehouse.location</field>
        <field name="view_mode">kanban,form</field>
        <field name="domain">[]</field>
        <field name="context">{'group_by': 'related_warehouse'}</field>
    </record>
    <record model="ir.actions.act_window" id="quants_emdad_windows">
        <field name="name">Quantities Management</field>
        <field name="res_model">emdad.warehouse.quants</field>
        <field name="view_mode">kanban,form</field>
        <field name="domain">[]</field>
                <field name="context">{'group_by': 'purpose'}</field>
    </record>
     <record model="ir.actions.act_window" id="warehouse_quantities_windows">
        <field name="name">Quantities History</field>
        <field name="res_model">emdad.warehouse.quants.lines</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[]</field>
                        <field name="context">{'group_by': 'product_id'}</field>

    </record>    
    <record model="ir.actions.act_window" id="batches_management_windows">
        <field name="name">Batches Management</field>
        <field name="res_model">emdad.warehouse.batches</field>
        <field name="view_mode">kanban,form</field>
        <field name="domain">[]</field>
                                <field name="context">{'group_by': 'status'}</field>
    </record>
    <record model="ir.actions.act_window" id="scrap_actions_windows">
        <field name="name">Scrap Actions</field>
        <field name="res_model">emdad.warehouse.scrap</field>
        <field name="view_mode">kanban,form</field>
        <field name="domain">[]</field>
    </record>
    <!-- MENUS -->
    <menuitem id="emdad_warehouses_menu" name="Warehouses"/>
    <menuitem id="emdad_warehouses_view_menu"
              name="Warehouses Management"
              parent="emdad_warehouses_menu"
              sequence="2"
              action="emdad_inventory.warehouse_emdad_windows"/>
    <menuitem id="emdad_locations_view_menu"
              name="Locations Management"
              parent="emdad_warehouses_menu"
              sequence="2"
              action="emdad_inventory.locations_emdad_windows"/>
    <menuitem id="emdad_quants_view_menu"
              name="Quantities Management"
              parent="emdad_warehouses_menu"
              sequence="2"
              action="emdad_inventory.quants_emdad_windows"/>
    <menuitem
        id="batch_management_menu"
        name="Batches"
        action="emdad_inventory.batches_management_windows"
        parent="emdad_warehouses_menu"
        sequence="4"/>
    <menuitem id="emdad_products_quants_view_menu"
              name="Quantities"
              parent="emdad_warehouses_menu"
              sequence="2"
              action="emdad_inventory.warehouse_quantities_windows"/>
    <menuitem
        id="warehouse_actions_menu"
        name="Actions"
        parent="emdad_warehouses_menu"
        sequence="10"/>
        <menuitem
            id="emdad_warehouse_scrap_menu"
            name="Scrap Actions"
            action="scrap_actions_windows"
            parent="warehouse_actions_menu"
            sequence="10"/>

</emdad>
